     1: #include "ledsense.h"
     2: #include "adc.h"
     3: #include "const.h"
     4: #include "ds18b20.h"
     5: #include "lcd44780.h"
     6: #include "typedef.h"
     7: 
     8: //-----------------------------------------------------------------------------
     9: #define LS_A_PIN RA2
    10: #define LS_A_TRIS TRISA2
    11: #define LS_K_PIN RA1
    12: #define LS_K_TRIS TRISA1
    13: 
    14: // -------------------------------------------------------------------------
    15: void
    16: ledsense_emit(BOOL on) {
    17:   LS_A_TRIS = LS_K_TRIS = OUTPUT;
    18: 
    19:   LS_A_PIN = on;
    20:   LS_K_PIN = LOW;
    21: }
    22: 
    23: // -------------------------------------------------------------------------
    24: void
    25: ledsense_charge() {
    26:   LS_A_TRIS = LS_K_TRIS = OUTPUT;
    27: 
    28:   LS_A_PIN = LOW;
    29:   LS_K_PIN = HIGH;
    30: }
    31: 
    32: // -------------------------------------------------------------------------
    33: uint16_t
    34: ledsense_read() {
    35:   LS_K_TRIS = INPUT;
    36: 
    37:   return adc_read(1);
    38: }
    39: 
    40: extern volatile BOOL control;
    41: 
    42: // -------------------------------------------------------------------------
    43: void
    44: ledsense_loop() {}
